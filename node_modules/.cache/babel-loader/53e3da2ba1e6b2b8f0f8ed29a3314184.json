{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kamalesh M\\\\Desktop\\\\reactclient\\\\frontend\\\\src\\\\components\\\\patientForm.js\",\n  _s = $RefreshSig$();\nimport { Button, TextField } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/styles';\nimport Select from 'react-select';\nimport { useSelector } from \"react-redux\";\nimport { React, useMemo, useState } from 'react';\nimport { createNewPatient } from \"../redux/patientDetail\";\nimport { useDispatch } from \"react-redux\";\nimport './App.css';\nimport PhoneInput, { isValidPhoneNumber } from 'react-phone-number-input';\nimport countryList from 'react-select-country-list';\nimport 'react-phone-number-input/style.css';\nimport './newPatient.css';\nimport { Dialog, DialogContent, DialogTitle } from '@mui/material';\nimport './phoneNumber.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyle = makeStyles(theme => ({\n  nameField: {\n    \"& .MuiFormControl-root\": {\n      width: '12vw',\n      marginRight: '45px',\n      height: '5px'\n    }\n  }\n}));\nconst initialValues = {\n  Firstname: \"\",\n  Lastname: \"\",\n  Middlename: \"\",\n  phoneNumber: \"\",\n  email: \"\",\n  Address: \"\",\n  weight: '',\n  height: '',\n  country: '',\n  state: '',\n  zipcode: ''\n};\nfunction PatientForm(props) {\n  _s();\n  const dispatch = useDispatch();\n  const [fname, setFname] = useState('');\n  const [value, setValue] = useState();\n  const {\n    user\n  } = useSelector(state => state.user);\n  const doctorId = user.doctorId;\n  const doctorJwt = user.access_token;\n  const [addressString, setAddressString] = useState('');\n  const [values, setValues] = useState(initialValues);\n  const [address, setAddress] = useState('');\n  const [state, setState] = useState('');\n  const [zip_code, setZip_code] = useState('');\n  const [newAddedPatient, setNewAddedPatient] = useState([]);\n  const [openConfirmSave, setOpenConfirmSave] = useState(false);\n  const [Countryvalue, setCountryvalue] = useState({\n    value: '',\n    label: ''\n  });\n  const countryOptions = useMemo(() => countryList().getData(), []);\n  const classes = useStyle();\n  const handleInputChange = e => {\n    var name = e.target.name;\n    var value = e.target.value;\n    setValues({\n      ...values,\n      [name]: value\n    });\n  };\n  const countrySelectHandler = value => {\n    setCountryvalue(value);\n  };\n  const addressInputHandler = e => {\n    var value = e.target.value;\n    setAddress(value);\n  };\n  const zipCodeInputHandler = e => {\n    var value = e.target.value;\n    setZip_code(value);\n  };\n  const stateInputHandler = e => {\n    var value = e.target.value;\n    setState(value);\n  };\n  const WeightInputHandler = e => {\n    // since th etextfield only return string we are converting the input to number\n    var value = e.target.value;\n    setValues({\n      ...values,\n      weight: Number(value)\n    });\n  };\n  const HeightInputHandler = e => {\n    // since th etextfield only return string we are converting the input to number\n    var value = e.target.value;\n    setValues({\n      ...values,\n      height: Number(value)\n    });\n  };\n  const formSubmitHandler = value => {\n    value.preventDefault();\n    var phoneFlag = true;\n    var addressCondition = false;\n    if (address.length > 0 && Countryvalue.label.length > 0 && state.length > 0 && zip_code.length > 0) {\n      var addressString = address + \" \" + state + \" \" + zip_code + \" \" + Countryvalue.label;\n      setAddressString(addressString);\n      addressCondition = true;\n      console.log(\"concatinating address field:\", addressString);\n    } else {\n      addressCondition = false;\n      console.log(\"missing address field\");\n    }\n    if (values.phoneNumber.length > 0) {\n      phoneFlag = isValidPhoneNumber(values.phoneNumber);\n      console.log(\"checking phone flag\", phoneFlag, values.phoneNumber);\n    } else {\n      console.log(\"enter phone number\");\n    }\n    if (addressCondition === true && phoneFlag === true && values.Firstname.length > 0 && values.Lastname.length > 0 && values.Middlename.length > 0 && values.phoneNumber.length > 0 && values.email.length > 0 && values.weight > 0 && values.height > 0) {\n      console.log(\"valid form\", values);\n      const queryObj = JSON.parse(JSON.stringify(values));\n      queryObj.Address = addressString;\n      queryObj.Doctor = doctorId;\n      console.log(\"queryObje:\", queryObj);\n      //checking whether the user is valid by passign the jwt token to the server and match it\n      var authenticated = checkAuth(doctorJwt).then(function (result) {\n        console.log(result);\n      });\n      if (authenticated) {\n        console.log(\"authenticated\");\n        createPatientApiCall(queryObj).then(function (result) {\n          console.log(\"checking create patient response\", result);\n          if (result.message === \"patient created\" && result.status === '200') {\n            console.log(\"result.patient:\", result.patient);\n            //store the new patient list in the store so that we can avoid fetching the data backend again\n            dispatch(createNewPatient(result.patient));\n            newAddedPatient.push(result.patient);\n            setFname(result.patient.Firstname);\n            console.log(\"//////////////////////\", newAddedPatient);\n            console.log(\"))))))))))))))))\", fname);\n            setOpenConfirmSave(true);\n          }\n        });\n      } else {\n        console.log(\"unauthorized user\");\n      }\n    } else {\n      console.log(\"invalid form\", values);\n    }\n  };\n  async function closePatientDisplay() {\n    setNewAddedPatient([]);\n    props.closeHandler();\n    setOpenConfirmSave(false);\n    console.log(\"checking newly added paitent array:\", newAddedPatient);\n  }\n  async function checkAuth(e) {\n    var responseCopy;\n    console.log(\"checking AUth\");\n    await fetch(\"http://localhost:8000/protected\", {\n      method: 'GET',\n      headers: {\n        'Content-type': 'application/json',\n        'Authorization': `Bearer ${doctorJwt}` // notice the Bearer before your token\n      }\n    }).then(response => response.json()).then(json => responseCopy = json);\n\n    //checking if the user is authentic by sending the jwt to validate it\n\n    if (responseCopy.message === \"Authentic User\") {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  async function createPatientApiCall(queryObj) {\n    var createObj;\n    await fetch(\"http://localhost:8000/patient\", {\n      // Adding method type\n      method: \"POST\",\n      // Adding body or contents to send\n      body: JSON.stringify(queryObj),\n      // Adding headers to the request\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\"\n      }\n    }).then(response => response.json()).then(json => createObj = json);\n    return createObj;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: props.dialogType\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          marginTop: \"10px\",\n          marginRight: '15px'\n        },\n        children: \"Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.nameField,\n        style: {\n          display: 'flex',\n          height: '50px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          size: \"small\",\n          variant: \"standard\",\n          label: \"First name\",\n          name: \"Firstname\",\n          value: values.Firstname,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          size: \"small\",\n          variant: \"standard\",\n          label: \"Middle name\",\n          name: \"Middlename\",\n          value: values.Middlename,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          size: \"small\",\n          variant: \"standard\",\n          label: \"Last name\",\n          name: \"Lastname\",\n          value: values.Lastname,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          marginTop: \"15px\",\n          marginRight: '15px'\n        },\n        children: \"Email :\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '5px',\n          display: 'flex'\n        },\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          variant: \"standard\",\n          fullWidth: true,\n          label: \"Email\",\n          name: \"email\",\n          value: values.email,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          marginTop: '15px'\n        },\n        children: \"Address\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '15px',\n          display: 'flex'\n        },\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          variant: \"standard\",\n          label: \"Address\",\n          name: \"Address\",\n          value: values.Address,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '45px',\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            marginRight: '15px'\n          },\n          children: \"Country :\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"250px\",\n            marginLeft: \"25px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            options: countryOptions,\n            value: Countryvalue,\n            onChange: countrySelectHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '45px',\n          display: 'flex'\n        },\n        children: Countryvalue && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            style: {\n              marginRight: '15px'\n            },\n            children: \"State\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            style: {\n              marginRight: '45px'\n            },\n            variant: \"standard\",\n            size: \"small\",\n            label: \"state\",\n            name: \"state\",\n            value: values.state,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"standard\",\n            size: \"small\",\n            label: \"zip_code\",\n            name: \"zip_code\",\n            value: zip_code,\n            onChange: zipCodeInputHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '40px',\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            marginRight: '15px'\n          },\n          children: \"Phone :\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginLeft: \"25px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(PhoneInput, {\n            className: \"PhoneInputInput\",\n            international: true,\n            defaultCountry: Countryvalue.value,\n            value: value,\n            onChange: value => setValues({\n              ...values,\n              phoneNumber: value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Is valid: \", values.phoneNumber && isValidPhoneNumber(values.phoneNumber) ? 'true' : 'false']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '25px',\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          type: \"number\",\n          size: \"small\",\n          variant: \"standard\",\n          label: \"Weight\",\n          name: \"weight\",\n          value: values.weight,\n          onChange: WeightInputHandler,\n          style: {\n            width: '100px',\n            marginRight: '45px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          type: \"number\",\n          size: \"small\",\n          variant: \"standard\",\n          label: \"Height\",\n          name: \"height\",\n          value: values.height,\n          onChange: HeightInputHandler,\n          style: {\n            width: '100px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          style: {\n            marginTop: '75px',\n            float: 'right',\n            marginBottom: '25px'\n          },\n          onClick: formSubmitHandler,\n          children: \"Contained\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: openConfirmSave,\n      PaperProps: {\n        style: {\n          minHeight: '50%',\n          maxHeight: '50%',\n          minWidth: '400px'\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            justifyContent: \"space-between\",\n            display: \"flex\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: closePatientDisplay,\n            style: {\n              background: \"red\",\n              color: \"white\"\n            },\n            className: \"CloseButton\",\n            children: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: newAddedPatient.map(patient => {\n          return /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '20px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"newPatientForm\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"Heading\",\n                  children: \"First Name:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 42\n                }, this), \" \", patient.Firstname]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"newPatientForm\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"Heading\",\n                  children: \"Last Name:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 42\n                }, this), \"  \", patient.Lastname]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"newPatientForm\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"Heading\",\n                  children: \"Middle Name:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 42\n                }, this), \"  \", patient.Middlename]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"newPatientForm\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"Heading\",\n                  children: \"Address:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 42\n                }, this), \" \", patient.Address]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"newPatientForm\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"Heading\",\n                  children: \"Email:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 42\n                }, this), \" \", patient.email]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"newPatientForm\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"Heading\",\n                  children: \"Address:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 42\n                }, this), \" \", patient.phoneNumber]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  justifyContent: \"space-between\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"newPatientForm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"Heading\",\n                    children: \"Height:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 353,\n                    columnNumber: 103\n                  }, this), \" \", patient.height]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 72\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"newPatientForm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"Heading\",\n                    children: \"Weight:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 353,\n                    columnNumber: 196\n                  }, this), \" \", patient.weight]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 165\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 11\n              }, this)]\n            }, patient._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 11\n            }, this)\n          }, void 0, false);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 206,\n    columnNumber: 5\n  }, this);\n}\n_s(PatientForm, \"02N93P6xkmRK2/KZ9EZjaRVYUFg=\", false, function () {\n  return [useDispatch, useSelector, useStyle];\n});\n_c = PatientForm;\nexport default PatientForm;\nvar _c;\n$RefreshReg$(_c, \"PatientForm\");","map":{"version":3,"names":["Button","TextField","makeStyles","Select","useSelector","React","useMemo","useState","createNewPatient","useDispatch","PhoneInput","isValidPhoneNumber","countryList","Dialog","DialogContent","DialogTitle","useStyle","theme","nameField","width","marginRight","height","initialValues","Firstname","Lastname","Middlename","phoneNumber","email","Address","weight","country","state","zipcode","PatientForm","props","dispatch","fname","setFname","value","setValue","user","doctorId","doctorJwt","access_token","addressString","setAddressString","values","setValues","address","setAddress","setState","zip_code","setZip_code","newAddedPatient","setNewAddedPatient","openConfirmSave","setOpenConfirmSave","Countryvalue","setCountryvalue","label","countryOptions","getData","classes","handleInputChange","e","name","target","countrySelectHandler","addressInputHandler","zipCodeInputHandler","stateInputHandler","WeightInputHandler","Number","HeightInputHandler","formSubmitHandler","preventDefault","phoneFlag","addressCondition","length","console","log","queryObj","JSON","parse","stringify","Doctor","authenticated","checkAuth","then","result","createPatientApiCall","message","status","patient","push","closePatientDisplay","closeHandler","responseCopy","fetch","method","headers","response","json","createObj","body","dialogType","marginTop","display","marginLeft","float","marginBottom","style","minHeight","maxHeight","minWidth","justifyContent","background","color","map","padding","_id"],"sources":["C:/Users/Kamalesh M/Desktop/reactclient/frontend/src/components/patientForm.js"],"sourcesContent":["import {  Button ,TextField } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport Select from 'react-select'\r\nimport { useSelector } from \"react-redux\";\r\nimport {React, useMemo , useState } from 'react';\r\nimport {createNewPatient} from\"../redux/patientDetail\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport './App.css';\r\nimport PhoneInput, { isValidPhoneNumber } from 'react-phone-number-input'\r\nimport countryList from 'react-select-country-list'\r\nimport 'react-phone-number-input/style.css'\r\nimport './newPatient.css'\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogTitle\r\n  }from '@mui/material'\r\nimport './phoneNumber.css'\r\nconst useStyle = makeStyles( theme => ({\r\n    nameField:{\r\n        \"& .MuiFormControl-root\":{\r\n            width: '12vw',\r\n            marginRight: '45px',\r\n            height: '5px'\r\n        }\r\n    }\r\n}))\r\nconst initialValues={\r\n    Firstname: \"\",\r\n    Lastname: \"\",\r\n    Middlename: \"\",\r\n    phoneNumber: \"\",\r\n    email: \"\",\r\n    Address: \"\",\r\n    weight: '',\r\n    height: '',\r\n    country: '',\r\n    state: '',\r\n    zipcode: ''\r\n}\r\n\r\nfunction PatientForm(props) {\r\n    const dispatch = useDispatch()\r\n    const[fname,setFname] = useState('')\r\n    const [value, setValue] = useState()\r\n    const { user } = useSelector((state) => state.user)\r\n    const doctorId = user.doctorId\r\n    const doctorJwt = user.access_token\r\n    const [addressString,setAddressString] = useState('');\r\n    const [values,setValues] = useState(initialValues);\r\n    const [address,setAddress] = useState('');\r\n    const [state,setState] = useState('');\r\n    const [zip_code,setZip_code] = useState('');\r\n    const [newAddedPatient,setNewAddedPatient] = useState([]);\r\n    const [openConfirmSave,setOpenConfirmSave] = useState(false);\r\n    const [Countryvalue, setCountryvalue] = useState({\r\n        value:'',\r\n        label:''\r\n    })\r\n    const countryOptions = useMemo(() => countryList().getData(), [])\r\n    const classes = useStyle();\r\n    const handleInputChange = e => {\r\n        var name = e.target.name\r\n        var value = e.target.value\r\n        setValues({\r\n            ...values,\r\n            [name]:value\r\n        })\r\n    }\r\n    const countrySelectHandler = value => {\r\n        setCountryvalue(value)\r\n    }\r\n    const addressInputHandler = e => {\r\n        var value = e.target.value\r\n        setAddress(value) \r\n    }\r\n    const zipCodeInputHandler = e => {\r\n        var value = e.target.value\r\n        setZip_code(value) \r\n    }\r\n    const stateInputHandler = e => {\r\n        var value = e.target.value\r\n        setState(value) \r\n    }\r\n    const WeightInputHandler = e => {\r\n\r\n        // since th etextfield only return string we are converting the input to number\r\n        var value = e.target.value\r\n        setValues({\r\n            ...values,\r\n            weight:Number(value)\r\n        }) \r\n    }\r\n    const HeightInputHandler = e => {\r\n\r\n        // since th etextfield only return string we are converting the input to number\r\n        var value = e.target.value\r\n        setValues({\r\n            ...values,\r\n            height:Number(value)\r\n        }) \r\n    }\r\n    const formSubmitHandler = value => {\r\n      value.preventDefault();\r\n      var phoneFlag = true;\r\n      var addressCondition = false;\r\n      if(address.length > 0 && Countryvalue.label.length > 0 && state.length > 0 && zip_code.length > 0){\r\n        var addressString = address + \" \" + state + \" \" + zip_code + \" \" + Countryvalue.label\r\n        setAddressString(addressString)\r\n        addressCondition = true\r\n        console.log(\"concatinating address field:\",addressString)\r\n      }\r\n      else {\r\n        addressCondition = false\r\n            console.log(\"missing address field\")\r\n        }\r\n      if(values.phoneNumber.length > 0){\r\n        phoneFlag = isValidPhoneNumber(values.phoneNumber)\r\n        console.log(\"checking phone flag\",phoneFlag,values.phoneNumber)\r\n      }\r\n      else{\r\n        console.log(\"enter phone number\")\r\n      }\r\n\r\n      if(addressCondition === true && phoneFlag === true && values.Firstname.length > 0 && values.Lastname.length > 0 && values.Middlename.length >0\r\n        && values.phoneNumber.length > 0 && values.email.length > 0 && values.weight > 0  && values.height > 0){\r\n            console.log(\"valid form\",values)\r\n            const queryObj = JSON.parse(JSON.stringify(values));\r\n            queryObj.Address = addressString\r\n            queryObj.Doctor = doctorId\r\n            console.log(\"queryObje:\",queryObj)\r\n            //checking whether the user is valid by passign the jwt token to the server and match it\r\n            var authenticated = checkAuth(doctorJwt).then(function(result) {\r\n                console.log(result)\r\n             })\r\n             if(authenticated){\r\n                console.log(\"authenticated\")\r\n                createPatientApiCall(queryObj).then(function(result) {\r\n                    console.log(\"checking create patient response\",result)\r\n                    if(result.message === \"patient created\" && result.status === '200' ){\r\n                        console.log(\"result.patient:\",result.patient)\r\n                        //store the new patient list in the store so that we can avoid fetching the data backend again\r\n                        dispatch(createNewPatient(result.patient))\r\n                        newAddedPatient.push(result.patient)\r\n                        setFname(result.patient.Firstname)\r\n                        console.log(\"//////////////////////\",newAddedPatient)\r\n                        console.log(\"))))))))))))))))\",fname)\r\n                        setOpenConfirmSave(true)\r\n                    }\r\n                 })\r\n             }\r\n             else{\r\n                console.log(\"unauthorized user\")\r\n             }\r\n            \r\n        }\r\n      else{\r\n            console.log(\"invalid form\",values)\r\n      }\r\n      \r\n    }\r\n    async function closePatientDisplay(){\r\n           setNewAddedPatient([])\r\n           props.closeHandler()\r\n           setOpenConfirmSave(false)\r\n           console.log(\"checking newly added paitent array:\",newAddedPatient)\r\n    }\r\n    async function checkAuth(e){\r\n        var responseCopy;\r\n        console.log(\"checking AUth\")\r\n        await fetch(\"http://localhost:8000/protected\", {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'Authorization': `Bearer ${doctorJwt}`, // notice the Bearer before your token\r\n            }\r\n        }).then(response => response.json())\r\n        .then(json =>  responseCopy = json);\r\n\r\n        //checking if the user is authentic by sending the jwt to validate it\r\n\r\n        if(responseCopy.message === \"Authentic User\"){\r\n            return true\r\n        }\r\n        else{\r\n            return false\r\n        }    \r\n    }\r\n    async function createPatientApiCall(queryObj){\r\n        var createObj;\r\n        await fetch(\"http://localhost:8000/patient\", {   \r\n            // Adding method type\r\n            method: \"POST\",\r\n            // Adding body or contents to send\r\n            body: JSON.stringify(queryObj),\r\n            // Adding headers to the request\r\n            headers: {\r\n                \"Content-type\": \"application/json; charset=UTF-8\"\r\n            }\r\n          })\r\n        .then(response => response.json())\r\n        .then(json =>  createObj = json)\r\n        return createObj;\r\n    }\r\n  return (\r\n    <div>\r\n        <form>\r\n            <h1>{props.dialogType}</h1>\r\n            <h1 style={{marginTop:\"10px\",marginRight:'15px'}}>Name</h1>\r\n            <div className={classes.nameField} style={{display:'flex',height: '50px'}}>\r\n                <TextField\r\n                required\r\n                size=\"small\"\r\n                variant='standard'\r\n                label=\"First name\"\r\n                name=\"Firstname\"\r\n                value={values.Firstname}\r\n                onChange={handleInputChange}\r\n                />\r\n                <TextField\r\n                size=\"small\"\r\n                variant='standard'\r\n                label=\"Middle name\"\r\n                name=\"Middlename\"\r\n                value={values.Middlename}\r\n                onChange={handleInputChange}\r\n                />\r\n                <TextField\r\n                size=\"small\"\r\n                variant='standard'\r\n                label=\"Last name\"\r\n                name=\"Lastname\"\r\n                value={values.Lastname}\r\n                onChange={handleInputChange}\r\n                />\r\n            </div>\r\n            <h1 style={{marginTop:\"15px\",marginRight:'15px'}}>Email :</h1>\r\n            <div  style={{marginTop:'5px',display:'flex'}}>\r\n            <TextField\r\n                variant='standard'\r\n                fullWidth \r\n                label=\"Email\"\r\n                name=\"email\"\r\n                value={values.email}\r\n                onChange={handleInputChange}\r\n                />\r\n            </div>\r\n            <h1 style={{marginTop:'15px'}}>Address</h1>\r\n            <div style={{marginTop:'15px',display:'flex'}}>       \r\n            <TextField\r\n                fullWidth\r\n                variant='standard'\r\n                label=\"Address\"\r\n                name=\"Address\"\r\n                value={values.Address}\r\n                onChange={handleInputChange}\r\n            />\r\n            </div>\r\n            <div style={{marginTop:'45px',display:'flex'}}>\r\n            <h1 style={{marginRight:'15px'}}>Country :</h1>\r\n            <div style={{width:\"250px\",marginLeft:\"25px\"}}>\r\n                <Select\r\n                options={countryOptions} \r\n                value={Countryvalue} \r\n                onChange={countrySelectHandler}\r\n                ></Select>\r\n             </div>\r\n            </div>\r\n            <div style={{marginTop:'45px',display:'flex'}}>\r\n\r\n            {Countryvalue && (\r\n            <div>\r\n                <h1 style={{marginRight:'15px'}}>State</h1>\r\n                <TextField\r\n                    style={{marginRight:'45px'}}\r\n                    variant='standard'\r\n                    size=\"small\"\r\n                    label=\"state\"\r\n                    name=\"state\"\r\n                    value={values.state}\r\n                    onChange={handleInputChange}\r\n                />\r\n                <TextField\r\n                    variant='standard'\r\n                    size=\"small\"\r\n                    label=\"zip_code\"\r\n                    name=\"zip_code\"\r\n                    value={zip_code}\r\n                    onChange={zipCodeInputHandler}\r\n                />\r\n             </div>\r\n            )}\r\n            </div>\r\n            <div style={{marginTop:'40px',display:'flex'}}>\r\n            <h1 style={{marginRight:'15px'}}>Phone :</h1>\r\n            <div style={{marginLeft:\"25px\"}}>\r\n                <PhoneInput\r\n                className=\"PhoneInputInput\"\r\n                international\r\n                defaultCountry={Countryvalue.value}\r\n                value={value}\r\n                onChange={value => setValues({...values,phoneNumber:value})} />\r\n             </div>\r\n            </div>\r\n            <p>Is valid: {values.phoneNumber && isValidPhoneNumber(values.phoneNumber) ? 'true' : 'false'}</p>\r\n            <div style={{marginTop:'25px',display:'flex'}}>\r\n            <TextField\r\n                type={\"number\"}\r\n                size=\"small\"\r\n                variant='standard'\r\n                label=\"Weight\"\r\n                name=\"weight\"\r\n                value={values.weight}\r\n                onChange={WeightInputHandler}\r\n                style = {{width: '100px', marginRight: '45px'}}\r\n                />\r\n            <TextField\r\n                type=\"number\"\r\n                size=\"small\"\r\n                variant='standard'\r\n                label=\"Height\"\r\n                name=\"height\"\r\n                value={values.height}\r\n                onChange={HeightInputHandler}\r\n                style = {{width: '100px'}}\r\n                />\r\n            </div>\r\n            <div>\r\n                <Button variant=\"contained\"  style = {{marginTop: '75px',float:'right',marginBottom:'25px'}} onClick={formSubmitHandler}>Contained</Button>\r\n            </div>\r\n        </form>\r\n        <Dialog open={openConfirmSave} PaperProps={{ style: {\r\n        minHeight: '50%',\r\n        maxHeight: '50%',\r\n        minWidth: '400px'\r\n        }}}>\r\n        <DialogTitle>\r\n          <div style={{justifyContent:\"space-between\",display:\"flex\"}}>\r\n          <Button onClick={closePatientDisplay} style={{background: \"red\",color:\"white\"}} className=\"CloseButton\">X</Button>\r\n          </div>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n        {newAddedPatient.map((patient) => {\r\n\r\n          return <>\r\n          <div key={patient._id} style={{padding:'20px'}}>\r\n          <p className='newPatientForm' ><span  className='Heading'>First Name:</span> {patient.Firstname}</p>\r\n          <p className='newPatientForm' ><span  className='Heading'>Last Name:</span>  {patient.Lastname}</p>\r\n          <p className='newPatientForm' ><span  className='Heading'>Middle Name:</span>  {patient.Middlename}</p>\r\n          <p className='newPatientForm' ><span  className='Heading'>Address:</span> {patient.Address}</p>\r\n          <p className='newPatientForm' ><span  className='Heading'>Email:</span> {patient.email}</p>\r\n          <p className='newPatientForm' ><span  className='Heading'>Address:</span> {patient.phoneNumber}</p>\r\n          <div style={{display:'flex',justifyContent:\"space-between\"}}><p className='newPatientForm' ><span  className='Heading'>Height:</span> {patient.height}</p><p className='newPatientForm' ><span  className='Heading'>Weight:</span> {patient.weight}</p></div>\r\n          </div>\r\n          </>\r\n          \r\n        })}\r\n\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PatientForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}