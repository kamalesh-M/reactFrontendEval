{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _format = _interopRequireDefault(require(\"date-fns/format\"));\nvar _2 = require(\"./\");\nvar DataManager = /*#__PURE__*/\nfunction () {\n  function DataManager() {\n    var _this = this;\n    (0, _classCallCheck2[\"default\"])(this, DataManager);\n    (0, _defineProperty2[\"default\"])(this, \"applyFilters\", false);\n    (0, _defineProperty2[\"default\"])(this, \"applySearch\", false);\n    (0, _defineProperty2[\"default\"])(this, \"currentPage\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"detailPanelType\", 'multiple');\n    (0, _defineProperty2[\"default\"])(this, \"filterSelectionChecked\", false);\n    (0, _defineProperty2[\"default\"])(this, \"lastDetailPanelRow\", undefined);\n    (0, _defineProperty2[\"default\"])(this, \"lastEditingRow\", undefined);\n    (0, _defineProperty2[\"default\"])(this, \"orderBy\", -1);\n    (0, _defineProperty2[\"default\"])(this, \"orderDirection\", '');\n    (0, _defineProperty2[\"default\"])(this, \"pageSize\", 5);\n    (0, _defineProperty2[\"default\"])(this, \"paging\", true);\n    (0, _defineProperty2[\"default\"])(this, \"parentFunc\", null);\n    (0, _defineProperty2[\"default\"])(this, \"searchText\", '');\n    (0, _defineProperty2[\"default\"])(this, \"selectedCount\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"treefiedDataLength\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"treeDataMaxLevel\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"defaultExpanded\", false);\n    (0, _defineProperty2[\"default\"])(this, \"data\", []);\n    (0, _defineProperty2[\"default\"])(this, \"columns\", []);\n    (0, _defineProperty2[\"default\"])(this, \"filteredData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"searchedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"groupedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"treefiedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"sortedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"pagedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"renderData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"filtered\", false);\n    (0, _defineProperty2[\"default\"])(this, \"searched\", false);\n    (0, _defineProperty2[\"default\"])(this, \"grouped\", false);\n    (0, _defineProperty2[\"default\"])(this, \"treefied\", false);\n    (0, _defineProperty2[\"default\"])(this, \"sorted\", false);\n    (0, _defineProperty2[\"default\"])(this, \"paged\", false);\n    (0, _defineProperty2[\"default\"])(this, \"rootGroupsIndex\", {});\n    (0, _defineProperty2[\"default\"])(this, \"findDataByPath\", function (renderData, path) {\n      if (_this.isDataType(\"tree\")) {\n        var node = path.reduce(function (result, current) {\n          return result && result.tableData && result.tableData.childRows && result.tableData.childRows[current];\n        }, {\n          tableData: {\n            childRows: renderData\n          }\n        });\n        return node;\n      } else {\n        var data = {\n          groups: renderData\n        };\n        var _node = path.reduce(function (result, current) {\n          if (result.groups.length > 0) {\n            return result.groups[current];\n          } else if (result.data) {\n            return result.data[current];\n          } else {\n            return undefined;\n          }\n        }, data);\n        return _node;\n      }\n    });\n    (0, _defineProperty2[\"default\"])(this, \"getFieldValue\", function (rowData, columnDef) {\n      var lookup = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var value = typeof rowData[columnDef.field] !== 'undefined' ? rowData[columnDef.field] : (0, _2.byString)(rowData, columnDef.field);\n      if (columnDef.lookup && lookup) {\n        value = columnDef.lookup[value];\n      }\n      return value;\n    });\n    (0, _defineProperty2[\"default\"])(this, \"getRenderState\", function () {\n      if (_this.filtered === false) {\n        _this.filterData();\n      }\n      if (_this.searched === false) {\n        _this.searchData();\n      }\n      if (_this.grouped === false && _this.isDataType(\"group\")) {\n        _this.groupData();\n      }\n      if (_this.treefied === false && _this.isDataType(\"tree\")) {\n        _this.treefyData();\n      }\n      if (_this.sorted === false) {\n        _this.sortData();\n      }\n      if (_this.paged === false) {\n        _this.pageData();\n      }\n      return {\n        columns: _this.columns,\n        currentPage: _this.currentPage,\n        data: _this.sortedData,\n        lastEditingRow: _this.lastEditingRow,\n        orderBy: _this.orderBy,\n        orderDirection: _this.orderDirection,\n        originalData: _this.data,\n        pageSize: _this.pageSize,\n        renderData: _this.pagedData,\n        searchText: _this.searchText,\n        selectedCount: _this.selectedCount,\n        treefiedDataLength: _this.treefiedDataLength,\n        treeDataMaxLevel: _this.treeDataMaxLevel\n      };\n    });\n    (0, _defineProperty2[\"default\"])(this, \"filterData\", function () {\n      _this.searched = _this.grouped = _this.treefied = _this.sorted = _this.paged = false;\n      _this.filteredData = (0, _toConsumableArray2[\"default\"])(_this.data); // if (this.filterSelectionChecked) {\n      //   this.filterData = this.filterData.filter(row => {\n      //     return row.tableData.checked;\n      //   });\n      // }\n\n      if (_this.applyFilters) {\n        _this.columns.filter(function (columnDef) {\n          return columnDef.tableData.filterValue;\n        }).forEach(function (columnDef) {\n          var lookup = columnDef.lookup,\n            type = columnDef.type,\n            tableData = columnDef.tableData;\n          if (columnDef.customFilterAndSearch) {\n            _this.filteredData = _this.filteredData.filter(function (row) {\n              return !!columnDef.customFilterAndSearch(tableData.filterValue, row, columnDef);\n            });\n          } else {\n            if (lookup) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef, false);\n                return !tableData.filterValue || tableData.filterValue.length === 0 || tableData.filterValue.indexOf(value !== undefined && value.toString()) > -1;\n              });\n            } else if (type === 'numeric') {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n                return value + \"\" === tableData.filterValue;\n              });\n            } else if (type === 'boolean' && tableData.filterValue) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n                return value && tableData.filterValue === 'checked' || !value && tableData.filterValue === 'unchecked';\n              });\n            } else if (['date', 'datetime'].includes(type)) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n                var currentDate = value ? new Date(value) : null;\n                if (currentDate && currentDate.toString() !== 'Invalid Date') {\n                  var selectedDate = tableData.filterValue;\n                  var currentDateToCompare = '';\n                  var selectedDateToCompare = '';\n                  if (type === 'date') {\n                    currentDateToCompare = (0, _format[\"default\"])(currentDate, 'MM/dd/yyyy');\n                    selectedDateToCompare = (0, _format[\"default\"])(selectedDate, 'MM/dd/yyyy');\n                  } else if (type === 'datetime') {\n                    currentDateToCompare = (0, _format[\"default\"])(currentDate, 'MM/dd/yyyy - HH:mm');\n                    selectedDateToCompare = (0, _format[\"default\"])(selectedDate, 'MM/dd/yyyy - HH:mm');\n                  }\n                  return currentDateToCompare === selectedDateToCompare;\n                }\n                return true;\n              });\n            } else if (type === 'time') {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n                var currentHour = value || null;\n                if (currentHour) {\n                  var selectedHour = tableData.filterValue;\n                  var currentHourToCompare = (0, _format[\"default\"])(selectedHour, 'HH:mm');\n                  return currentHour === currentHourToCompare;\n                }\n                return true;\n              });\n            } else {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n                return value && value.toString().toUpperCase().includes(tableData.filterValue.toUpperCase());\n              });\n            }\n          }\n        });\n      }\n      _this.filtered = true;\n    });\n    (0, _defineProperty2[\"default\"])(this, \"searchData\", function () {\n      _this.grouped = _this.treefied = _this.sorted = _this.paged = false;\n      _this.searchedData = (0, _toConsumableArray2[\"default\"])(_this.filteredData);\n      if (_this.searchText && _this.applySearch) {\n        _this.searchedData = _this.searchedData.filter(function (row) {\n          return _this.columns.filter(function (columnDef) {\n            return columnDef.searchable === undefined ? !columnDef.hidden : columnDef.searchable;\n          }).some(function (columnDef) {\n            if (columnDef.customFilterAndSearch) {\n              return !!columnDef.customFilterAndSearch(_this.searchText, row, columnDef);\n            } else if (columnDef.field) {\n              var value = _this.getFieldValue(row, columnDef);\n              if (value) {\n                return value.toString().toUpperCase().includes(_this.searchText.toUpperCase());\n              }\n            }\n          });\n        });\n      }\n      _this.searched = true;\n    });\n  }\n  (0, _createClass2[\"default\"])(DataManager, [{\n    key: \"setData\",\n    value: function setData(data) {\n      var _this2 = this;\n      this.selectedCount = 0;\n      this.data = data.map(function (row, index) {\n        row.tableData = (0, _objectSpread2[\"default\"])({}, row.tableData, {\n          id: index\n        });\n        if (row.tableData.checked) {\n          _this2.selectedCount++;\n        }\n        return row;\n      });\n      this.filtered = false;\n    }\n  }, {\n    key: \"setColumns\",\n    value: function setColumns(columns) {\n      this.columns = columns.map(function (columnDef, index) {\n        columnDef.tableData = (0, _objectSpread2[\"default\"])({\n          columnOrder: index,\n          filterValue: columnDef.defaultFilter,\n          groupOrder: columnDef.defaultGroupOrder,\n          groupSort: columnDef.defaultGroupSort || 'asc'\n        }, columnDef.tableData, {\n          id: index\n        });\n        return columnDef;\n      });\n    }\n  }, {\n    key: \"setDefaultExpanded\",\n    value: function setDefaultExpanded(expanded) {\n      this.defaultExpanded = expanded;\n    }\n  }, {\n    key: \"changeApplySearch\",\n    value: function changeApplySearch(applySearch) {\n      this.applySearch = applySearch;\n      this.searched = false;\n    }\n  }, {\n    key: \"changeApplyFilters\",\n    value: function changeApplyFilters(applyFilters) {\n      this.applyFilters = applyFilters;\n      this.filtered = false;\n    }\n  }, {\n    key: \"changePaging\",\n    value: function changePaging(paging) {\n      this.paging = paging;\n      this.paged = false;\n    }\n  }, {\n    key: \"changeCurrentPage\",\n    value: function changeCurrentPage(currentPage) {\n      this.currentPage = currentPage;\n      this.paged = false;\n    }\n  }, {\n    key: \"changePageSize\",\n    value: function changePageSize(pageSize) {\n      this.pageSize = pageSize;\n      this.paged = false;\n    }\n  }, {\n    key: \"changeParentFunc\",\n    value: function changeParentFunc(parentFunc) {\n      this.parentFunc = parentFunc;\n    }\n  }, {\n    key: \"changeFilterValue\",\n    value: function changeFilterValue(columnId, value) {\n      this.columns[columnId].tableData.filterValue = value;\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeFilterSelectionChecked\",\n    value: function changeFilterSelectionChecked(checked) {\n      this.filterSelectionChecked = checked;\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeRowSelected\",\n    value: function changeRowSelected(checked, path) {\n      var _this3 = this;\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.tableData.checked = checked;\n      this.selectedCount = this.selectedCount + (checked ? 1 : -1);\n      var checkChildRows = function checkChildRows(rowData) {\n        if (rowData.tableData.childRows) {\n          rowData.tableData.childRows.forEach(function (childRow) {\n            childRow.tableData.checked = checked;\n            _this3.selectedCount = _this3.selectedCount + (checked ? 1 : -1);\n            checkChildRows(childRow);\n          });\n        }\n      };\n      checkChildRows(rowData);\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeDetailPanelVisibility\",\n    value: function changeDetailPanelVisibility(path, render) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n      if ((rowData.tableData.showDetailPanel || '').toString() === render.toString()) {\n        rowData.tableData.showDetailPanel = undefined;\n      } else {\n        rowData.tableData.showDetailPanel = render;\n      }\n      if (this.detailPanelType === 'single' && this.lastDetailPanelRow && this.lastDetailPanelRow != rowData) {\n        this.lastDetailPanelRow.tableData.showDetailPanel = undefined;\n      }\n      this.lastDetailPanelRow = rowData;\n    }\n  }, {\n    key: \"changeGroupExpand\",\n    value: function changeGroupExpand(path) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.isExpanded = !rowData.isExpanded;\n    }\n  }, {\n    key: \"changeSearchText\",\n    value: function changeSearchText(searchText) {\n      this.searchText = searchText;\n      this.searched = false;\n    }\n  }, {\n    key: \"changeRowEditing\",\n    value: function changeRowEditing(rowData, mode) {\n      if (rowData) {\n        rowData.tableData.editing = mode;\n        if (this.lastEditingRow && this.lastEditingRow != rowData) {\n          this.lastEditingRow.tableData.editing = undefined;\n        }\n        if (mode) {\n          this.lastEditingRow = rowData;\n        } else {\n          this.lastEditingRow = undefined;\n        }\n      } else if (this.lastEditingRow) {\n        this.lastEditingRow.tableData.editing = undefined;\n        this.lastEditingRow = undefined;\n      }\n    }\n  }, {\n    key: \"changeAllSelected\",\n    value: function changeAllSelected(checked) {\n      var selectedCount = 0;\n      if (this.isDataType(\"group\")) {\n        var setCheck = function setCheck(data) {\n          data.forEach(function (element) {\n            if (element.groups.length > 0) {\n              setCheck(element.groups);\n            } else {\n              element.data.forEach(function (d) {\n                d.tableData.checked = checked;\n                selectedCount++;\n              });\n            }\n          });\n        };\n        setCheck(this.groupedData);\n      } else {\n        this.searchedData.map(function (row) {\n          row.tableData.checked = checked;\n          return row;\n        });\n        selectedCount = this.searchedData.length;\n      }\n      this.selectedCount = checked ? selectedCount : 0;\n    }\n  }, {\n    key: \"changeOrder\",\n    value: function changeOrder(orderBy, orderDirection) {\n      this.orderBy = orderBy;\n      this.orderDirection = orderDirection;\n      this.currentPage = 0;\n      this.sorted = false;\n    }\n  }, {\n    key: \"changeGroupOrder\",\n    value: function changeGroupOrder(columnId) {\n      var column = this.columns.find(function (c) {\n        return c.tableData.id === columnId;\n      });\n      if (column.tableData.groupSort === 'asc') {\n        column.tableData.groupSort = 'desc';\n      } else {\n        column.tableData.groupSort = 'asc';\n      }\n      this.sorted = false;\n    }\n  }, {\n    key: \"changeColumnHidden\",\n    value: function changeColumnHidden(columnId, hidden) {\n      var column = this.columns.find(function (c) {\n        return c.tableData.id === columnId;\n      });\n      column.hidden = hidden;\n    }\n  }, {\n    key: \"changeTreeExpand\",\n    value: function changeTreeExpand(path) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.tableData.isTreeExpanded = !rowData.tableData.isTreeExpanded;\n    }\n  }, {\n    key: \"changeDetailPanelType\",\n    value: function changeDetailPanelType(type) {\n      this.detailPanelType = type;\n    }\n  }, {\n    key: \"changeByDrag\",\n    value: function changeByDrag(result) {\n      var start = 0;\n      var groups = this.columns.filter(function (col) {\n        return col.tableData.groupOrder > -1;\n      }).sort(function (col1, col2) {\n        return col1.tableData.groupOrder - col2.tableData.groupOrder;\n      });\n      if (result.destination.droppableId === \"groups\" && result.source.droppableId === \"groups\") {\n        start = Math.min(result.destination.index, result.source.index);\n        var end = Math.max(result.destination.index, result.source.index);\n        groups = groups.slice(start, end + 1);\n        if (result.destination.index < result.source.index) {\n          // Take last and add as first\n          var last = groups.pop();\n          groups.unshift(last);\n        } else {\n          // Take first and add as last\n          var _last = groups.shift();\n          groups.push(_last);\n        }\n      } else if (result.destination.droppableId === \"groups\" && result.source.droppableId === \"headers\") {\n        var newGroup = this.columns.find(function (c) {\n          return c.tableData.id == result.draggableId;\n        });\n        groups.splice(result.destination.index, 0, newGroup);\n      } else if (result.destination.droppableId === \"headers\" && result.source.droppableId === \"groups\") {\n        var removeGroup = this.columns.find(function (c) {\n          return c.tableData.id == result.draggableId;\n        });\n        removeGroup.tableData.groupOrder = undefined;\n        groups.splice(result.source.index, 1);\n      } else if (result.destination.droppableId === \"headers\" && result.source.droppableId === \"headers\") {\n        start = Math.min(result.destination.index, result.source.index);\n        var _end = Math.max(result.destination.index, result.source.index);\n        var colsToMov = this.columns.sort(function (a, b) {\n          return a.tableData.columnOrder - b.tableData.columnOrder;\n        }).filter(function (column) {\n          return column.tableData.groupOrder === undefined;\n        }).slice(start, _end + 1);\n        if (result.destination.index < result.source.index) {\n          // Take last and add as first\n          var _last2 = colsToMov.pop();\n          colsToMov.unshift(_last2);\n        } else {\n          // Take first and add as last\n          var _last3 = colsToMov.shift();\n          colsToMov.push(_last3);\n        }\n        for (var i = 0; i < colsToMov.length; i++) {\n          colsToMov[i].tableData.columnOrder = start + i;\n        }\n        return;\n      } else {\n        return;\n      }\n      for (var _i = 0; _i < groups.length; _i++) {\n        groups[_i].tableData.groupOrder = start + _i;\n      }\n      this.sorted = this.grouped = false;\n    }\n  }, {\n    key: \"findGroupByGroupPath\",\n    value: function findGroupByGroupPath(renderData, path) {\n      var data = {\n        groups: renderData,\n        groupsIndex: this.rootGroupsIndex\n      };\n      var node = path.reduce(function (result, current) {\n        if (!result) {\n          return undefined;\n        }\n        if (result.groupsIndex[current] !== undefined) {\n          return result.groups[result.groupsIndex[current]];\n        }\n        return undefined; // const group = result.groups.find(a => a.value === current);\n        // return group;\n      }, data);\n      return node;\n    }\n  }, {\n    key: \"isDataType\",\n    value: function isDataType(type) {\n      var dataType = \"normal\";\n      if (this.parentFunc) {\n        dataType = \"tree\";\n      } else if (this.columns.find(function (a) {\n        return a.tableData.groupOrder > -1;\n      })) {\n        dataType = \"group\";\n      }\n      return type === dataType;\n    }\n  }, {\n    key: \"sort\",\n    value: function sort(a, b, type) {\n      if (type === 'numeric') {\n        return a - b;\n      } else {\n        if (a !== b) {\n          // to find nulls\n          if (!a) return -1;\n          if (!b) return 1;\n        }\n        return a < b ? -1 : a > b ? 1 : 0;\n      }\n    }\n  }, {\n    key: \"sortList\",\n    value: function sortList(list) {\n      var _this4 = this;\n      var columnDef = this.columns.find(function (_) {\n        return _.tableData.id === _this4.orderBy;\n      });\n      var result = list;\n      if (columnDef.customSort) {\n        if (this.orderDirection === 'desc') {\n          result = list.sort(function (a, b) {\n            return columnDef.customSort(b, a, 'row');\n          });\n        } else {\n          result = list.sort(function (a, b) {\n            return columnDef.customSort(a, b, 'row');\n          });\n        }\n      } else {\n        result = list.sort(this.orderDirection === 'desc' ? function (a, b) {\n          return _this4.sort(_this4.getFieldValue(b, columnDef), _this4.getFieldValue(a, columnDef), columnDef.type);\n        } : function (a, b) {\n          return _this4.sort(_this4.getFieldValue(a, columnDef), _this4.getFieldValue(b, columnDef), columnDef.type);\n        });\n      }\n      return result;\n    }\n  }, {\n    key: \"groupData\",\n    value: function groupData() {\n      var _this5 = this;\n      this.sorted = this.paged = false;\n      var tmpData = (0, _toConsumableArray2[\"default\"])(this.searchedData);\n      var groups = this.columns.filter(function (col) {\n        return col.tableData.groupOrder > -1;\n      }).sort(function (col1, col2) {\n        return col1.tableData.groupOrder - col2.tableData.groupOrder;\n      });\n      var subData = tmpData.reduce(function (result, currentRow) {\n        var object = result;\n        object = groups.reduce(function (o, colDef) {\n          var value = currentRow[colDef.field] || (0, _2.byString)(currentRow, colDef.field);\n          var group;\n          if (o.groupsIndex[value] !== undefined) {\n            group = o.groups[o.groupsIndex[value]];\n          }\n          if (!group) {\n            var path = [].concat((0, _toConsumableArray2[\"default\"])(o.path || []), [value]);\n            var oldGroup = _this5.findGroupByGroupPath(_this5.groupedData, path) || {\n              isExpanded: _this5.defaultExpanded ? true : false\n            };\n            group = {\n              value: value,\n              groups: [],\n              groupsIndex: {},\n              data: [],\n              isExpanded: oldGroup.isExpanded,\n              path: path\n            };\n            o.groups.push(group);\n            o.groupsIndex[value] = o.groups.length - 1;\n          }\n          return group;\n        }, object);\n        object.data.push(currentRow);\n        return result;\n      }, {\n        groups: [],\n        groupsIndex: {}\n      });\n      this.groupedData = subData.groups;\n      this.grouped = true;\n      this.rootGroupsIndex = subData.groupsIndex;\n    }\n  }, {\n    key: \"treefyData\",\n    value: function treefyData() {\n      var _this6 = this;\n      this.sorted = this.paged = false;\n      this.data.forEach(function (a) {\n        return a.tableData.childRows = null;\n      });\n      this.treefiedData = [];\n      this.treefiedDataLength = 0;\n      this.treeDataMaxLevel = 0;\n      var addRow = function addRow(rowData) {\n        var parent = _this6.parentFunc(rowData, _this6.data);\n        if (parent) {\n          parent.tableData.childRows = parent.tableData.childRows || [];\n          var oldParent = parent.tableData.path && _this6.findDataByPath(_this6.treefiedData, parent.tableData.path);\n          var isDefined = oldParent && oldParent.tableData.isTreeExpanded !== undefined;\n          parent.tableData.isTreeExpanded = isDefined ? oldParent.tableData.isTreeExpanded : _this6.defaultExpanded ? true : false;\n          if (!parent.tableData.childRows.includes(rowData)) {\n            parent.tableData.childRows.push(rowData);\n            _this6.treefiedDataLength++;\n          }\n          addRow(parent);\n          rowData.tableData.path = [].concat((0, _toConsumableArray2[\"default\"])(parent.tableData.path), [parent.tableData.childRows.length - 1]);\n          _this6.treeDataMaxLevel = Math.max(_this6.treeDataMaxLevel, rowData.tableData.path.length);\n        } else {\n          if (!_this6.treefiedData.includes(rowData)) {\n            _this6.treefiedData.push(rowData);\n            _this6.treefiedDataLength++;\n            rowData.tableData.path = [_this6.treefiedData.length - 1];\n          }\n        }\n      };\n      this.searchedData.forEach(function (rowData) {\n        addRow(rowData);\n      });\n      this.treefied = true;\n    }\n  }, {\n    key: \"sortData\",\n    value: function sortData() {\n      var _this7 = this;\n      this.paged = false;\n      if (this.isDataType(\"group\")) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.groupedData);\n        var groups = this.columns.filter(function (col) {\n          return col.tableData.groupOrder > -1;\n        }).sort(function (col1, col2) {\n          return col1.tableData.groupOrder - col2.tableData.groupOrder;\n        });\n        var sortGroups = function sortGroups(list, columnDef) {\n          if (columnDef.customSort) {\n            return list.sort(columnDef.tableData.groupSort === 'desc' ? function (a, b) {\n              return columnDef.customSort(b.value, a.value, 'group');\n            } : function (a, b) {\n              return columnDef.customSort(a.value, b.value, 'group');\n            });\n          } else {\n            return list.sort(columnDef.tableData.groupSort === 'desc' ? function (a, b) {\n              return _this7.sort(b.value, a.value, columnDef.type);\n            } : function (a, b) {\n              return _this7.sort(a.value, b.value, columnDef.type);\n            });\n          }\n        };\n        this.sortedData = sortGroups(this.sortedData, groups[0]);\n        var sortGroupData = function sortGroupData(list, level) {\n          list.forEach(function (element) {\n            if (element.groups.length > 0) {\n              var column = groups[level];\n              element.groups = sortGroups(element.groups, column);\n              sortGroupData(element.groups, level + 1);\n            } else {\n              if (_this7.orderBy >= 0 && _this7.orderDirection) {\n                element.data = _this7.sortList(element.data);\n              }\n            }\n          });\n        };\n        sortGroupData(this.sortedData, 1);\n      } else if (this.isDataType(\"tree\")) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.treefiedData);\n        if (this.orderBy != -1) {\n          this.sortedData = this.sortList(this.sortedData);\n          var sortTree = function sortTree(list) {\n            list.forEach(function (item) {\n              if (item.tableData.childRows) {\n                item.tableData.childRows = _this7.sortList(item.tableData.childRows);\n                sortTree(item.tableData.childRows);\n              }\n            });\n          };\n          sortTree(this.sortedData);\n        }\n      } else if (this.isDataType(\"normal\")) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.searchedData);\n        if (this.orderBy != -1) {\n          this.sortedData = this.sortList(this.sortedData);\n        }\n      }\n      this.sorted = true;\n    }\n  }, {\n    key: \"pageData\",\n    value: function pageData() {\n      this.pagedData = (0, _toConsumableArray2[\"default\"])(this.sortedData);\n      if (this.paging) {\n        var startIndex = this.currentPage * this.pageSize;\n        var endIndex = startIndex + this.pageSize;\n        this.pagedData = this.pagedData.slice(startIndex, endIndex);\n      }\n      this.paged = true;\n    }\n  }]);\n  return DataManager;\n}();\nexports[\"default\"] = DataManager;","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_objectSpread2","_toConsumableArray2","_classCallCheck2","_createClass2","_defineProperty2","_format","_2","DataManager","_this","undefined","renderData","path","isDataType","node","reduce","result","current","tableData","childRows","data","groups","_node","length","rowData","columnDef","lookup","arguments","field","byString","filtered","filterData","searched","searchData","grouped","groupData","treefied","treefyData","sorted","sortData","paged","pageData","columns","currentPage","sortedData","lastEditingRow","orderBy","orderDirection","originalData","pageSize","pagedData","searchText","selectedCount","treefiedDataLength","treeDataMaxLevel","filteredData","applyFilters","filter","filterValue","forEach","type","customFilterAndSearch","row","getFieldValue","indexOf","toString","includes","currentDate","Date","selectedDate","currentDateToCompare","selectedDateToCompare","currentHour","selectedHour","currentHourToCompare","toUpperCase","searchedData","applySearch","searchable","hidden","some","key","setData","_this2","map","index","id","checked","setColumns","columnOrder","defaultFilter","groupOrder","defaultGroupOrder","groupSort","defaultGroupSort","setDefaultExpanded","expanded","defaultExpanded","changeApplySearch","changeApplyFilters","changePaging","paging","changeCurrentPage","changePageSize","changeParentFunc","parentFunc","changeFilterValue","columnId","changeFilterSelectionChecked","filterSelectionChecked","changeRowSelected","_this3","findDataByPath","checkChildRows","childRow","changeDetailPanelVisibility","render","showDetailPanel","detailPanelType","lastDetailPanelRow","changeGroupExpand","isExpanded","changeSearchText","changeRowEditing","mode","editing","changeAllSelected","setCheck","element","d","groupedData","changeOrder","changeGroupOrder","column","find","c","changeColumnHidden","changeTreeExpand","isTreeExpanded","changeDetailPanelType","changeByDrag","start","col","sort","col1","col2","destination","droppableId","source","Math","min","end","max","slice","last","pop","unshift","_last","shift","push","newGroup","draggableId","splice","removeGroup","_end","colsToMov","a","b","_last2","_last3","i","_i","findGroupByGroupPath","groupsIndex","rootGroupsIndex","dataType","sortList","list","_this4","_","customSort","_this5","tmpData","subData","currentRow","object","o","colDef","group","concat","oldGroup","_this6","treefiedData","addRow","parent","oldParent","isDefined","_this7","sortGroups","sortGroupData","level","sortTree","item","startIndex","endIndex"],"sources":["C:/Users/Kamalesh M/Desktop/reactclient/frontend/node_modules/material-table/dist/utils/data-manager.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _format = _interopRequireDefault(require(\"date-fns/format\"));\n\nvar _2 = require(\"./\");\n\nvar DataManager =\n/*#__PURE__*/\nfunction () {\n  function DataManager() {\n    var _this = this;\n\n    (0, _classCallCheck2[\"default\"])(this, DataManager);\n    (0, _defineProperty2[\"default\"])(this, \"applyFilters\", false);\n    (0, _defineProperty2[\"default\"])(this, \"applySearch\", false);\n    (0, _defineProperty2[\"default\"])(this, \"currentPage\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"detailPanelType\", 'multiple');\n    (0, _defineProperty2[\"default\"])(this, \"filterSelectionChecked\", false);\n    (0, _defineProperty2[\"default\"])(this, \"lastDetailPanelRow\", undefined);\n    (0, _defineProperty2[\"default\"])(this, \"lastEditingRow\", undefined);\n    (0, _defineProperty2[\"default\"])(this, \"orderBy\", -1);\n    (0, _defineProperty2[\"default\"])(this, \"orderDirection\", '');\n    (0, _defineProperty2[\"default\"])(this, \"pageSize\", 5);\n    (0, _defineProperty2[\"default\"])(this, \"paging\", true);\n    (0, _defineProperty2[\"default\"])(this, \"parentFunc\", null);\n    (0, _defineProperty2[\"default\"])(this, \"searchText\", '');\n    (0, _defineProperty2[\"default\"])(this, \"selectedCount\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"treefiedDataLength\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"treeDataMaxLevel\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"defaultExpanded\", false);\n    (0, _defineProperty2[\"default\"])(this, \"data\", []);\n    (0, _defineProperty2[\"default\"])(this, \"columns\", []);\n    (0, _defineProperty2[\"default\"])(this, \"filteredData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"searchedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"groupedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"treefiedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"sortedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"pagedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"renderData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"filtered\", false);\n    (0, _defineProperty2[\"default\"])(this, \"searched\", false);\n    (0, _defineProperty2[\"default\"])(this, \"grouped\", false);\n    (0, _defineProperty2[\"default\"])(this, \"treefied\", false);\n    (0, _defineProperty2[\"default\"])(this, \"sorted\", false);\n    (0, _defineProperty2[\"default\"])(this, \"paged\", false);\n    (0, _defineProperty2[\"default\"])(this, \"rootGroupsIndex\", {});\n    (0, _defineProperty2[\"default\"])(this, \"findDataByPath\", function (renderData, path) {\n      if (_this.isDataType(\"tree\")) {\n        var node = path.reduce(function (result, current) {\n          return result && result.tableData && result.tableData.childRows && result.tableData.childRows[current];\n        }, {\n          tableData: {\n            childRows: renderData\n          }\n        });\n        return node;\n      } else {\n        var data = {\n          groups: renderData\n        };\n\n        var _node = path.reduce(function (result, current) {\n          if (result.groups.length > 0) {\n            return result.groups[current];\n          } else if (result.data) {\n            return result.data[current];\n          } else {\n            return undefined;\n          }\n        }, data);\n\n        return _node;\n      }\n    });\n    (0, _defineProperty2[\"default\"])(this, \"getFieldValue\", function (rowData, columnDef) {\n      var lookup = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var value = typeof rowData[columnDef.field] !== 'undefined' ? rowData[columnDef.field] : (0, _2.byString)(rowData, columnDef.field);\n\n      if (columnDef.lookup && lookup) {\n        value = columnDef.lookup[value];\n      }\n\n      return value;\n    });\n    (0, _defineProperty2[\"default\"])(this, \"getRenderState\", function () {\n      if (_this.filtered === false) {\n        _this.filterData();\n      }\n\n      if (_this.searched === false) {\n        _this.searchData();\n      }\n\n      if (_this.grouped === false && _this.isDataType(\"group\")) {\n        _this.groupData();\n      }\n\n      if (_this.treefied === false && _this.isDataType(\"tree\")) {\n        _this.treefyData();\n      }\n\n      if (_this.sorted === false) {\n        _this.sortData();\n      }\n\n      if (_this.paged === false) {\n        _this.pageData();\n      }\n\n      return {\n        columns: _this.columns,\n        currentPage: _this.currentPage,\n        data: _this.sortedData,\n        lastEditingRow: _this.lastEditingRow,\n        orderBy: _this.orderBy,\n        orderDirection: _this.orderDirection,\n        originalData: _this.data,\n        pageSize: _this.pageSize,\n        renderData: _this.pagedData,\n        searchText: _this.searchText,\n        selectedCount: _this.selectedCount,\n        treefiedDataLength: _this.treefiedDataLength,\n        treeDataMaxLevel: _this.treeDataMaxLevel\n      };\n    });\n    (0, _defineProperty2[\"default\"])(this, \"filterData\", function () {\n      _this.searched = _this.grouped = _this.treefied = _this.sorted = _this.paged = false;\n      _this.filteredData = (0, _toConsumableArray2[\"default\"])(_this.data); // if (this.filterSelectionChecked) {\n      //   this.filterData = this.filterData.filter(row => {\n      //     return row.tableData.checked;\n      //   });\n      // }\n\n      if (_this.applyFilters) {\n        _this.columns.filter(function (columnDef) {\n          return columnDef.tableData.filterValue;\n        }).forEach(function (columnDef) {\n          var lookup = columnDef.lookup,\n              type = columnDef.type,\n              tableData = columnDef.tableData;\n\n          if (columnDef.customFilterAndSearch) {\n            _this.filteredData = _this.filteredData.filter(function (row) {\n              return !!columnDef.customFilterAndSearch(tableData.filterValue, row, columnDef);\n            });\n          } else {\n            if (lookup) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef, false);\n\n                return !tableData.filterValue || tableData.filterValue.length === 0 || tableData.filterValue.indexOf(value !== undefined && value.toString()) > -1;\n              });\n            } else if (type === 'numeric') {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                return value + \"\" === tableData.filterValue;\n              });\n            } else if (type === 'boolean' && tableData.filterValue) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                return value && tableData.filterValue === 'checked' || !value && tableData.filterValue === 'unchecked';\n              });\n            } else if (['date', 'datetime'].includes(type)) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                var currentDate = value ? new Date(value) : null;\n\n                if (currentDate && currentDate.toString() !== 'Invalid Date') {\n                  var selectedDate = tableData.filterValue;\n                  var currentDateToCompare = '';\n                  var selectedDateToCompare = '';\n\n                  if (type === 'date') {\n                    currentDateToCompare = (0, _format[\"default\"])(currentDate, 'MM/dd/yyyy');\n                    selectedDateToCompare = (0, _format[\"default\"])(selectedDate, 'MM/dd/yyyy');\n                  } else if (type === 'datetime') {\n                    currentDateToCompare = (0, _format[\"default\"])(currentDate, 'MM/dd/yyyy - HH:mm');\n                    selectedDateToCompare = (0, _format[\"default\"])(selectedDate, 'MM/dd/yyyy - HH:mm');\n                  }\n\n                  return currentDateToCompare === selectedDateToCompare;\n                }\n\n                return true;\n              });\n            } else if (type === 'time') {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                var currentHour = value || null;\n\n                if (currentHour) {\n                  var selectedHour = tableData.filterValue;\n                  var currentHourToCompare = (0, _format[\"default\"])(selectedHour, 'HH:mm');\n                  return currentHour === currentHourToCompare;\n                }\n\n                return true;\n              });\n            } else {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                return value && value.toString().toUpperCase().includes(tableData.filterValue.toUpperCase());\n              });\n            }\n          }\n        });\n      }\n\n      _this.filtered = true;\n    });\n    (0, _defineProperty2[\"default\"])(this, \"searchData\", function () {\n      _this.grouped = _this.treefied = _this.sorted = _this.paged = false;\n      _this.searchedData = (0, _toConsumableArray2[\"default\"])(_this.filteredData);\n\n      if (_this.searchText && _this.applySearch) {\n        _this.searchedData = _this.searchedData.filter(function (row) {\n          return _this.columns.filter(function (columnDef) {\n            return columnDef.searchable === undefined ? !columnDef.hidden : columnDef.searchable;\n          }).some(function (columnDef) {\n            if (columnDef.customFilterAndSearch) {\n              return !!columnDef.customFilterAndSearch(_this.searchText, row, columnDef);\n            } else if (columnDef.field) {\n              var value = _this.getFieldValue(row, columnDef);\n\n              if (value) {\n                return value.toString().toUpperCase().includes(_this.searchText.toUpperCase());\n              }\n            }\n          });\n        });\n      }\n\n      _this.searched = true;\n    });\n  }\n\n  (0, _createClass2[\"default\"])(DataManager, [{\n    key: \"setData\",\n    value: function setData(data) {\n      var _this2 = this;\n\n      this.selectedCount = 0;\n      this.data = data.map(function (row, index) {\n        row.tableData = (0, _objectSpread2[\"default\"])({}, row.tableData, {\n          id: index\n        });\n\n        if (row.tableData.checked) {\n          _this2.selectedCount++;\n        }\n\n        return row;\n      });\n      this.filtered = false;\n    }\n  }, {\n    key: \"setColumns\",\n    value: function setColumns(columns) {\n      this.columns = columns.map(function (columnDef, index) {\n        columnDef.tableData = (0, _objectSpread2[\"default\"])({\n          columnOrder: index,\n          filterValue: columnDef.defaultFilter,\n          groupOrder: columnDef.defaultGroupOrder,\n          groupSort: columnDef.defaultGroupSort || 'asc'\n        }, columnDef.tableData, {\n          id: index\n        });\n        return columnDef;\n      });\n    }\n  }, {\n    key: \"setDefaultExpanded\",\n    value: function setDefaultExpanded(expanded) {\n      this.defaultExpanded = expanded;\n    }\n  }, {\n    key: \"changeApplySearch\",\n    value: function changeApplySearch(applySearch) {\n      this.applySearch = applySearch;\n      this.searched = false;\n    }\n  }, {\n    key: \"changeApplyFilters\",\n    value: function changeApplyFilters(applyFilters) {\n      this.applyFilters = applyFilters;\n      this.filtered = false;\n    }\n  }, {\n    key: \"changePaging\",\n    value: function changePaging(paging) {\n      this.paging = paging;\n      this.paged = false;\n    }\n  }, {\n    key: \"changeCurrentPage\",\n    value: function changeCurrentPage(currentPage) {\n      this.currentPage = currentPage;\n      this.paged = false;\n    }\n  }, {\n    key: \"changePageSize\",\n    value: function changePageSize(pageSize) {\n      this.pageSize = pageSize;\n      this.paged = false;\n    }\n  }, {\n    key: \"changeParentFunc\",\n    value: function changeParentFunc(parentFunc) {\n      this.parentFunc = parentFunc;\n    }\n  }, {\n    key: \"changeFilterValue\",\n    value: function changeFilterValue(columnId, value) {\n      this.columns[columnId].tableData.filterValue = value;\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeFilterSelectionChecked\",\n    value: function changeFilterSelectionChecked(checked) {\n      this.filterSelectionChecked = checked;\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeRowSelected\",\n    value: function changeRowSelected(checked, path) {\n      var _this3 = this;\n\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.tableData.checked = checked;\n      this.selectedCount = this.selectedCount + (checked ? 1 : -1);\n\n      var checkChildRows = function checkChildRows(rowData) {\n        if (rowData.tableData.childRows) {\n          rowData.tableData.childRows.forEach(function (childRow) {\n            childRow.tableData.checked = checked;\n            _this3.selectedCount = _this3.selectedCount + (checked ? 1 : -1);\n            checkChildRows(childRow);\n          });\n        }\n      };\n\n      checkChildRows(rowData);\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeDetailPanelVisibility\",\n    value: function changeDetailPanelVisibility(path, render) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n\n      if ((rowData.tableData.showDetailPanel || '').toString() === render.toString()) {\n        rowData.tableData.showDetailPanel = undefined;\n      } else {\n        rowData.tableData.showDetailPanel = render;\n      }\n\n      if (this.detailPanelType === 'single' && this.lastDetailPanelRow && this.lastDetailPanelRow != rowData) {\n        this.lastDetailPanelRow.tableData.showDetailPanel = undefined;\n      }\n\n      this.lastDetailPanelRow = rowData;\n    }\n  }, {\n    key: \"changeGroupExpand\",\n    value: function changeGroupExpand(path) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.isExpanded = !rowData.isExpanded;\n    }\n  }, {\n    key: \"changeSearchText\",\n    value: function changeSearchText(searchText) {\n      this.searchText = searchText;\n      this.searched = false;\n    }\n  }, {\n    key: \"changeRowEditing\",\n    value: function changeRowEditing(rowData, mode) {\n      if (rowData) {\n        rowData.tableData.editing = mode;\n\n        if (this.lastEditingRow && this.lastEditingRow != rowData) {\n          this.lastEditingRow.tableData.editing = undefined;\n        }\n\n        if (mode) {\n          this.lastEditingRow = rowData;\n        } else {\n          this.lastEditingRow = undefined;\n        }\n      } else if (this.lastEditingRow) {\n        this.lastEditingRow.tableData.editing = undefined;\n        this.lastEditingRow = undefined;\n      }\n    }\n  }, {\n    key: \"changeAllSelected\",\n    value: function changeAllSelected(checked) {\n      var selectedCount = 0;\n\n      if (this.isDataType(\"group\")) {\n        var setCheck = function setCheck(data) {\n          data.forEach(function (element) {\n            if (element.groups.length > 0) {\n              setCheck(element.groups);\n            } else {\n              element.data.forEach(function (d) {\n                d.tableData.checked = checked;\n                selectedCount++;\n              });\n            }\n          });\n        };\n\n        setCheck(this.groupedData);\n      } else {\n        this.searchedData.map(function (row) {\n          row.tableData.checked = checked;\n          return row;\n        });\n        selectedCount = this.searchedData.length;\n      }\n\n      this.selectedCount = checked ? selectedCount : 0;\n    }\n  }, {\n    key: \"changeOrder\",\n    value: function changeOrder(orderBy, orderDirection) {\n      this.orderBy = orderBy;\n      this.orderDirection = orderDirection;\n      this.currentPage = 0;\n      this.sorted = false;\n    }\n  }, {\n    key: \"changeGroupOrder\",\n    value: function changeGroupOrder(columnId) {\n      var column = this.columns.find(function (c) {\n        return c.tableData.id === columnId;\n      });\n\n      if (column.tableData.groupSort === 'asc') {\n        column.tableData.groupSort = 'desc';\n      } else {\n        column.tableData.groupSort = 'asc';\n      }\n\n      this.sorted = false;\n    }\n  }, {\n    key: \"changeColumnHidden\",\n    value: function changeColumnHidden(columnId, hidden) {\n      var column = this.columns.find(function (c) {\n        return c.tableData.id === columnId;\n      });\n      column.hidden = hidden;\n    }\n  }, {\n    key: \"changeTreeExpand\",\n    value: function changeTreeExpand(path) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.tableData.isTreeExpanded = !rowData.tableData.isTreeExpanded;\n    }\n  }, {\n    key: \"changeDetailPanelType\",\n    value: function changeDetailPanelType(type) {\n      this.detailPanelType = type;\n    }\n  }, {\n    key: \"changeByDrag\",\n    value: function changeByDrag(result) {\n      var start = 0;\n      var groups = this.columns.filter(function (col) {\n        return col.tableData.groupOrder > -1;\n      }).sort(function (col1, col2) {\n        return col1.tableData.groupOrder - col2.tableData.groupOrder;\n      });\n\n      if (result.destination.droppableId === \"groups\" && result.source.droppableId === \"groups\") {\n        start = Math.min(result.destination.index, result.source.index);\n        var end = Math.max(result.destination.index, result.source.index);\n        groups = groups.slice(start, end + 1);\n\n        if (result.destination.index < result.source.index) {\n          // Take last and add as first\n          var last = groups.pop();\n          groups.unshift(last);\n        } else {\n          // Take first and add as last\n          var _last = groups.shift();\n\n          groups.push(_last);\n        }\n      } else if (result.destination.droppableId === \"groups\" && result.source.droppableId === \"headers\") {\n        var newGroup = this.columns.find(function (c) {\n          return c.tableData.id == result.draggableId;\n        });\n        groups.splice(result.destination.index, 0, newGroup);\n      } else if (result.destination.droppableId === \"headers\" && result.source.droppableId === \"groups\") {\n        var removeGroup = this.columns.find(function (c) {\n          return c.tableData.id == result.draggableId;\n        });\n        removeGroup.tableData.groupOrder = undefined;\n        groups.splice(result.source.index, 1);\n      } else if (result.destination.droppableId === \"headers\" && result.source.droppableId === \"headers\") {\n        start = Math.min(result.destination.index, result.source.index);\n\n        var _end = Math.max(result.destination.index, result.source.index);\n\n        var colsToMov = this.columns.sort(function (a, b) {\n          return a.tableData.columnOrder - b.tableData.columnOrder;\n        }).filter(function (column) {\n          return column.tableData.groupOrder === undefined;\n        }).slice(start, _end + 1);\n\n        if (result.destination.index < result.source.index) {\n          // Take last and add as first\n          var _last2 = colsToMov.pop();\n\n          colsToMov.unshift(_last2);\n        } else {\n          // Take first and add as last\n          var _last3 = colsToMov.shift();\n\n          colsToMov.push(_last3);\n        }\n\n        for (var i = 0; i < colsToMov.length; i++) {\n          colsToMov[i].tableData.columnOrder = start + i;\n        }\n\n        return;\n      } else {\n        return;\n      }\n\n      for (var _i = 0; _i < groups.length; _i++) {\n        groups[_i].tableData.groupOrder = start + _i;\n      }\n\n      this.sorted = this.grouped = false;\n    }\n  }, {\n    key: \"findGroupByGroupPath\",\n    value: function findGroupByGroupPath(renderData, path) {\n      var data = {\n        groups: renderData,\n        groupsIndex: this.rootGroupsIndex\n      };\n      var node = path.reduce(function (result, current) {\n        if (!result) {\n          return undefined;\n        }\n\n        if (result.groupsIndex[current] !== undefined) {\n          return result.groups[result.groupsIndex[current]];\n        }\n\n        return undefined; // const group = result.groups.find(a => a.value === current);\n        // return group;\n      }, data);\n      return node;\n    }\n  }, {\n    key: \"isDataType\",\n    value: function isDataType(type) {\n      var dataType = \"normal\";\n\n      if (this.parentFunc) {\n        dataType = \"tree\";\n      } else if (this.columns.find(function (a) {\n        return a.tableData.groupOrder > -1;\n      })) {\n        dataType = \"group\";\n      }\n\n      return type === dataType;\n    }\n  }, {\n    key: \"sort\",\n    value: function sort(a, b, type) {\n      if (type === 'numeric') {\n        return a - b;\n      } else {\n        if (a !== b) {\n          // to find nulls\n          if (!a) return -1;\n          if (!b) return 1;\n        }\n\n        return a < b ? -1 : a > b ? 1 : 0;\n      }\n    }\n  }, {\n    key: \"sortList\",\n    value: function sortList(list) {\n      var _this4 = this;\n\n      var columnDef = this.columns.find(function (_) {\n        return _.tableData.id === _this4.orderBy;\n      });\n      var result = list;\n\n      if (columnDef.customSort) {\n        if (this.orderDirection === 'desc') {\n          result = list.sort(function (a, b) {\n            return columnDef.customSort(b, a, 'row');\n          });\n        } else {\n          result = list.sort(function (a, b) {\n            return columnDef.customSort(a, b, 'row');\n          });\n        }\n      } else {\n        result = list.sort(this.orderDirection === 'desc' ? function (a, b) {\n          return _this4.sort(_this4.getFieldValue(b, columnDef), _this4.getFieldValue(a, columnDef), columnDef.type);\n        } : function (a, b) {\n          return _this4.sort(_this4.getFieldValue(a, columnDef), _this4.getFieldValue(b, columnDef), columnDef.type);\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"groupData\",\n    value: function groupData() {\n      var _this5 = this;\n\n      this.sorted = this.paged = false;\n      var tmpData = (0, _toConsumableArray2[\"default\"])(this.searchedData);\n      var groups = this.columns.filter(function (col) {\n        return col.tableData.groupOrder > -1;\n      }).sort(function (col1, col2) {\n        return col1.tableData.groupOrder - col2.tableData.groupOrder;\n      });\n      var subData = tmpData.reduce(function (result, currentRow) {\n        var object = result;\n        object = groups.reduce(function (o, colDef) {\n          var value = currentRow[colDef.field] || (0, _2.byString)(currentRow, colDef.field);\n          var group;\n\n          if (o.groupsIndex[value] !== undefined) {\n            group = o.groups[o.groupsIndex[value]];\n          }\n\n          if (!group) {\n            var path = [].concat((0, _toConsumableArray2[\"default\"])(o.path || []), [value]);\n            var oldGroup = _this5.findGroupByGroupPath(_this5.groupedData, path) || {\n              isExpanded: _this5.defaultExpanded ? true : false\n            };\n            group = {\n              value: value,\n              groups: [],\n              groupsIndex: {},\n              data: [],\n              isExpanded: oldGroup.isExpanded,\n              path: path\n            };\n            o.groups.push(group);\n            o.groupsIndex[value] = o.groups.length - 1;\n          }\n\n          return group;\n        }, object);\n        object.data.push(currentRow);\n        return result;\n      }, {\n        groups: [],\n        groupsIndex: {}\n      });\n      this.groupedData = subData.groups;\n      this.grouped = true;\n      this.rootGroupsIndex = subData.groupsIndex;\n    }\n  }, {\n    key: \"treefyData\",\n    value: function treefyData() {\n      var _this6 = this;\n\n      this.sorted = this.paged = false;\n      this.data.forEach(function (a) {\n        return a.tableData.childRows = null;\n      });\n      this.treefiedData = [];\n      this.treefiedDataLength = 0;\n      this.treeDataMaxLevel = 0;\n\n      var addRow = function addRow(rowData) {\n        var parent = _this6.parentFunc(rowData, _this6.data);\n\n        if (parent) {\n          parent.tableData.childRows = parent.tableData.childRows || [];\n\n          var oldParent = parent.tableData.path && _this6.findDataByPath(_this6.treefiedData, parent.tableData.path);\n\n          var isDefined = oldParent && oldParent.tableData.isTreeExpanded !== undefined;\n          parent.tableData.isTreeExpanded = isDefined ? oldParent.tableData.isTreeExpanded : _this6.defaultExpanded ? true : false;\n\n          if (!parent.tableData.childRows.includes(rowData)) {\n            parent.tableData.childRows.push(rowData);\n            _this6.treefiedDataLength++;\n          }\n\n          addRow(parent);\n          rowData.tableData.path = [].concat((0, _toConsumableArray2[\"default\"])(parent.tableData.path), [parent.tableData.childRows.length - 1]);\n          _this6.treeDataMaxLevel = Math.max(_this6.treeDataMaxLevel, rowData.tableData.path.length);\n        } else {\n          if (!_this6.treefiedData.includes(rowData)) {\n            _this6.treefiedData.push(rowData);\n\n            _this6.treefiedDataLength++;\n            rowData.tableData.path = [_this6.treefiedData.length - 1];\n          }\n        }\n      };\n\n      this.searchedData.forEach(function (rowData) {\n        addRow(rowData);\n      });\n      this.treefied = true;\n    }\n  }, {\n    key: \"sortData\",\n    value: function sortData() {\n      var _this7 = this;\n\n      this.paged = false;\n\n      if (this.isDataType(\"group\")) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.groupedData);\n        var groups = this.columns.filter(function (col) {\n          return col.tableData.groupOrder > -1;\n        }).sort(function (col1, col2) {\n          return col1.tableData.groupOrder - col2.tableData.groupOrder;\n        });\n\n        var sortGroups = function sortGroups(list, columnDef) {\n          if (columnDef.customSort) {\n            return list.sort(columnDef.tableData.groupSort === 'desc' ? function (a, b) {\n              return columnDef.customSort(b.value, a.value, 'group');\n            } : function (a, b) {\n              return columnDef.customSort(a.value, b.value, 'group');\n            });\n          } else {\n            return list.sort(columnDef.tableData.groupSort === 'desc' ? function (a, b) {\n              return _this7.sort(b.value, a.value, columnDef.type);\n            } : function (a, b) {\n              return _this7.sort(a.value, b.value, columnDef.type);\n            });\n          }\n        };\n\n        this.sortedData = sortGroups(this.sortedData, groups[0]);\n\n        var sortGroupData = function sortGroupData(list, level) {\n          list.forEach(function (element) {\n            if (element.groups.length > 0) {\n              var column = groups[level];\n              element.groups = sortGroups(element.groups, column);\n              sortGroupData(element.groups, level + 1);\n            } else {\n              if (_this7.orderBy >= 0 && _this7.orderDirection) {\n                element.data = _this7.sortList(element.data);\n              }\n            }\n          });\n        };\n\n        sortGroupData(this.sortedData, 1);\n      } else if (this.isDataType(\"tree\")) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.treefiedData);\n\n        if (this.orderBy != -1) {\n          this.sortedData = this.sortList(this.sortedData);\n\n          var sortTree = function sortTree(list) {\n            list.forEach(function (item) {\n              if (item.tableData.childRows) {\n                item.tableData.childRows = _this7.sortList(item.tableData.childRows);\n                sortTree(item.tableData.childRows);\n              }\n            });\n          };\n\n          sortTree(this.sortedData);\n        }\n      } else if (this.isDataType(\"normal\")) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.searchedData);\n\n        if (this.orderBy != -1) {\n          this.sortedData = this.sortList(this.sortedData);\n        }\n      }\n\n      this.sorted = true;\n    }\n  }, {\n    key: \"pageData\",\n    value: function pageData() {\n      this.pagedData = (0, _toConsumableArray2[\"default\"])(this.sortedData);\n\n      if (this.paging) {\n        var startIndex = this.currentPage * this.pageSize;\n        var endIndex = startIndex + this.pageSize;\n        this.pagedData = this.pagedData.slice(startIndex, endIndex);\n      }\n\n      this.paged = true;\n    }\n  }]);\n  return DataManager;\n}();\n\nexports[\"default\"] = DataManager;"],"mappings":"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"},"metadata":{},"sourceType":"script"}